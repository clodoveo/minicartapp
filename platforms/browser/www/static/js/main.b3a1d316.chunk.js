(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,a,t){e.exports=t(36)},32:function(e,a,t){},36:function(e,a,t){"use strict";t.r(a);var n=t(3),i=t(5),o=t(8),r=t.n(o),c=t(12),l=t(0),s=t.n(l),m=t(13),u=t.n(m),p=t(40),d=(t(26),t(27),function(e){var a=e.q;return a>0?s.a.createElement("span",{className:"indicator"},a):""}),g=function(e){var a=s.a.createRef(null),t=e.product,n=e.f,i=e.baseUrl,o=e.addMenuNote,r=e.nl2br,c="",l="",m=t.descriptionVisible?"cardOpen":"",u=t.q>0?"moreThenZero":"",p="",g="",f="",v="",E="",b="";return""!=t.foto&&t.foto.indexOf("https")>-1?(f=s.a.createElement("div",{className:"imgContainer"},s.a.createElement("img",{src:"".concat(t.foto),style:{maxWidth:"100%"},alt:t.title})),v=s.a.createElement("i",{className:"fa fa-image icona-immagine"}),E=s.a.createElement("i",{className:"fas fa-chevron-down indicatore-dettagli"})):""!=t.foto&&(f=s.a.createElement("div",{className:"imgContainer"},s.a.createElement("img",{src:"".concat(i,"img/original/").concat(t.foto),style:{maxWidth:"100%"},alt:t.title})),v=s.a.createElement("i",{className:"fa fa-image icona-immagine"}),E=s.a.createElement("i",{className:"fas fa-chevron-down indicatore-dettagli"})),""!=t.descrizione&&(E=s.a.createElement("i",{className:"fas fa-chevron-down indicatore-dettagli"})),(t.descriptionVisible&&""!=t.descrizione||t.descriptionVisible&&""!=t.foto)&&(p=s.a.createElement("div",{className:"description animated fadeIn"},s.a.createElement("i",{className:"fa fa-times closeCard",onClick:function(){return n.toggleDescription(t.ID,a)}}),f,s.a.createElement("div",{className:"descriptionText"},r(t.descrizione))),g="card",E=s.a.createElement("i",{className:"fas fa-chevron-up indicatore-dettagli"})),t.q>0&&(c=s.a.createElement("button",{className:"remove",onClick:function(){return n.removeToCart(t.ID)}},s.a.createElement("i",{className:"fa fa-minus"})),t.descriptionVisible||(l="open"),b=s.a.createElement("input",{className:"noteRiga",type:"text",placeholder:"Inserisci qui richieste speciali...",value:t.noteRiga,name:"noteRiga_".concat(t.ID),onChange:function(e){o(t.ID,e.target.value)}}),E=""),s.a.createElement("div",{className:"products",ref:a},s.a.createElement("p",{className:"product-title ".concat(l," ").concat(m),onClick:function(){return n.toggleDescription(t.ID,a)}},t.title)," ",p,s.a.createElement("div",{className:"prices "+g,onClick:function(){return n.toggleDescription(t.ID,a)}},"\u20ac ",t.prezzo," ",v,s.a.createElement("div",{className:"indicatore-dettagli-container"},E)),s.a.createElement("div",{className:"buttons ".concat(m," ").concat(u)},c,s.a.createElement(d,{q:t.q}," "),s.a.createElement("button",{className:"add",onClick:function(e){n.addToCart(t.ID,e,a)}},s.a.createElement("i",{className:"fa fa-plus"}))),b,s.a.createElement("div",{className:"clearer"}))},f=function(e){var a=e.settings;return navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&window.navigator.vibrate([100,30,100]),s.a.createElement("div",{className:"minimo-ordine animated headShake"},"Importo minimo carrello: ",a.importo_minimo," \u20ac")},v=function(e){var a=e.handleSubmit,t=e.userdata,i=e.setUserdata,o=e.settings,r=e.calculatePrice,c=(e.prezzo,e.getSpeseSpedizione,e.modalitaConsegna);return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:a},s.a.createElement("div",{className:"form"},s.a.createElement("p",null,s.a.createElement("label",null,"Nome:"),s.a.createElement("input",{type:"text",name:"nome",required:!0,value:t.nome,onChange:function(e){i(Object(n.a)({},t,{nome:e.target.value}))}})),s.a.createElement("p",null,s.a.createElement("label",null,"Citt\xe0 e Indirizzo:"),s.a.createElement("input",{type:"text",name:"indirizzo",required:!0,value:t.indirizzo,onChange:function(e){i(Object(n.a)({},t,{indirizzo:e.target.value}))}})),s.a.createElement("p",null,s.a.createElement("label",null,"Telefono:"),s.a.createElement("input",{type:"tel",name:"telefono",required:!0,value:t.telefono,onChange:function(e){i(Object(n.a)({},t,{telefono:e.target.value}))}})),s.a.createElement("p",null,s.a.createElement("label",null,"Email:"),s.a.createElement("input",{type:"email",name:"email",required:!0,value:t.email,onChange:function(e){i(Object(n.a)({},t,{email:e.target.value}))}})),s.a.createElement("p",null,s.a.createElement("label",null,"NOTE :"),s.a.createElement("textarea",{name:"note",onChange:function(e){i(Object(n.a)({},t,{note:e.target.value}))},value:t.note}))),parseFloat(o.importo_minimo)<=parseFloat(r())||"Ritiro in negozio"==c?s.a.createElement("button",{className:"btn btn-right",onClick:function(){},type:"submit"},"Procedi"):s.a.createElement(f,{settings:o})))},E=function(e){var a=e.settings,t=e.f;return"0"===a.contanti_attivo&&"0"===a.bonifico_attivo&&a.contanti_attivo?s.a.createElement("h3",null,"Al momento non si accettano ordini!"):s.a.createElement("div",null,"Come vuoi pagare?",s.a.createElement("div",{className:"btn-pagaora"},"0"!==a.paypal_attivo?s.a.createElement("button",{className:"btn",onClick:function(){return t.goToPaypal()}},"Paypal"):"","0"!==a.bonifico_attivo?s.a.createElement("button",{className:"btn",onClick:function(){return t.goToBonifico()}},"Bonifico"):"","0"!==a.contanti_attivo?s.a.createElement("button",{className:"btn",onClick:function(){return t.goTocash()}},"Alla consegna"):""))},b=t(16),h=function(e){var a=Object(l.useRef)(null),t=function(){a.current.setAttribute("disabled","disabled"),console.log("click"),u()},i=e.paymentType,o=e.step,r=e.userdata,c=e.setUserdata,m=e.settings,u=e.inviaOrdine,p=e.handleSubmit,d=e.goToPaypal,g=e.goToBonifico,h=e.goTocash,N=e.calculatePrice,y=(e.prezzo,e.getSpeseSpedizione),C=e.modalitaConsegna,O=e.changeStep;if(1===o&&1==m.data_consegna_attivo)return s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,m.info_data_consegna),s.a.createElement("input",{type:"text",name:"data_consegna_ritiro",value:r.note_consegna,placeholder:"Scrivi qui",onChange:function(e){c(Object(n.a)({},r,{note_consegna:e.target.value}))}}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-right",onClick:function(){O(!0)}},"Procedi"));if(1===o&&O(!0),2===o)return s.a.createElement(v,{handleSubmit:p,userdata:r,setUserdata:c,settings:m,calculatePrice:N,modalitaConsegna:C});if(3===o)return s.a.createElement(E,{f:{goToPaypal:d,goToBonifico:g,goTocash:h},settings:m});if("cash"===i&&4===o)return s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("label",null,m.testo_contanti),s.a.createElement("input",{type:"text",placeholder:"Scrivi qui",name:"note_pagamento",value:r.note_pagamento,onChange:function(e){c(Object(n.a)({},r,{note_pagamento:e.target.value}))}})),parseFloat(m.importo_minimo)<=parseFloat(N())||"Ritiro in negozio"==C?s.a.createElement("button",{ref:a,className:"btn btn-invia",type:"submit",onClick:t},"Invia ordine"):s.a.createElement(f,{settings:m}));if("bonifico"===i&&4===o)return s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("label",null,m.testo_bonifico),s.a.createElement("input",{type:"text",name:"note_pagamento",placeholder:"Scrivi qui",value:r.note_pagamento,onChange:function(e){c(Object(n.a)({},r,{note_pagamento:e.target.value}))}})),parseFloat(m.importo_minimo)<=parseFloat(N())||"Ritiro in negozio"==C?s.a.createElement("button",{ref:a,className:"btn btn-invia",type:"submit",onClick:t},"Invia ordine"):s.a.createElement(f,{settings:m}));if("paypal"===i&&4===o){var _=parseFloat(parseFloat(parseFloat(N())+parseFloat(y(N()))).toFixed(2));return"Ritiro in negozio"==C&&(_=parseFloat(parseFloat(N()).toFixed(2))),s.a.createElement(s.a.Fragment,null,parseFloat(m.importo_minimo)<=parseFloat(N())||"Ritiro in negozio"==C?s.a.createElement("div",{className:"paypal"},s.a.createElement("h3",null,"Paga ora:"),s.a.createElement(b.PayPalButton,{amount:_,onSuccess:function(e,a){u()},options:{clientId:m.paypal_ID,currency:"EUR"}})):s.a.createElement(f,{settings:m}))}return s.a.createElement(s.a.Fragment,null)},N=function(e){var a=e.success,t=e.setSuccess,n=e.step,i=e.changeStep,o=e.calculatePrice,r=e.settings,c=e.orderNumber,l=e.paymentType,m=e.userdata,u=e.setUserdata,p=e.inviaOrdine,d=e.handleSubmit,g=e.goToPaypal,f=e.goToBonifico,v=e.goTocash,E=e.getSpeseSpedizione,b=e.modalitaConsegna,N=e.setModalitaConsegna,y="";if(y=0===n?s.a.createElement(s.a.Fragment,null,1==r.asporto_attivo?s.a.createElement("button",{className:"btn btn-right",onClick:function(){N("Ritiro in negozio"),i(!0)}},"Ritira in negozio",s.a.createElement("span",null,"(Takeaway)")):"",1==r.delivery_attivo?s.a.createElement("button",{disabled:parseFloat(r.importo_minimo)>parseFloat(o()),className:"btn btn-right",onClick:function(){N("Delivery"),i(!0)}},"Delivery",parseFloat(r.importo_minimo)>parseFloat(o())||E(o())>0?s.a.createElement("span",null,"(",E(o())>0?"+ ".concat(parseInt(r.spese_spedizione)," \u20ac"):" Spedizione gratuita!"," ",parseFloat(r.importo_minimo)>parseFloat(o())?"Spesa min. ".concat(parseInt(r.importo_minimo)," \u20ac)"):")"):s.a.createElement("span",null,"","(Consegna gratuita!)")):"",s.a.createElement("div",{class:"clearer"})):s.a.createElement("button",{className:" btn-right btn-close",onClick:function(){return i(!1)}},s.a.createElement("i",{className:"fa fa-times"})),1===a)return s.a.createElement("div",{className:"appFooter full"},s.a.createElement("div",{className:"clear"}),s.a.createElement("div",{className:"success"},s.a.createElement("div",{className:"success-icon-container animated tada"},s.a.createElement("i",{className:"fa fa-check"})),s.a.createElement("p",{className:"testo-scuccess"},r.testo_success),s.a.createElement("p",null,"Il tuo codice ordine \xe8: ",s.a.createElement("strong",null,"#",c))));if(-1===a)return s.a.createElement("div",{className:"appFooter full"},s.a.createElement("div",{className:"clear"}),s.a.createElement("div",{className:"success"},s.a.createElement("div",{className:"success-icon-container animated tada error"},s.a.createElement("i",{className:"fa fa-times"})),s.a.createElement("p",{className:"testo-scuccess"},"C'\xe8 stato un problema"),s.a.createElement("p",null,": ("),s.a.createElement("button",{className:"btn",onClick:function(){t(0),i(!1)}},"Indietro")));if(o()>0&&0==n)return s.a.createElement("div",{className:"appFooter"},s.a.createElement("div",{className:"tot"},s.a.createElement("span",{className:""},"Totale carrello: "),s.a.createElement("span",{className:"tot-price"},"\u20ac ",parseFloat(o()))),y,s.a.createElement("div",{className:"clear"}),s.a.createElement(h,{paymentType:l,step:n,userdata:m,setUserdata:u,settings:r,inviaOrdine:p,handleSubmit:d,goToPaypal:g,goToBonifico:f,goTocash:v,calculatePrice:o,getSpeseSpedizione:E,changeStep:i}));if(n>0){console.log(b);var C="";return"Ritiro in negozio"!=b&&(C=E(o())>0&&n>0?"( + Spese spedizione ".concat(E(o()),"\n      \u20ac)"):"(Carrello ".concat(o()," \u20ac + Spedizione gratuita! )")),s.a.createElement("div",{className:"appFooter"},s.a.createElement("div",{className:"tot"},s.a.createElement("span",{className:""},"Totale carrello: "),s.a.createElement("span",{className:"tot-price"},"\u20ac ",parseFloat(o())),s.a.createElement("p",null,C,s.a.createElement("br",null))),y,s.a.createElement("div",{className:"clear"}),s.a.createElement(h,{paymentType:l,step:n,userdata:m,setUserdata:u,settings:r,inviaOrdine:p,handleSubmit:d,goToPaypal:g,goToBonifico:f,goTocash:v,calculatePrice:o,getSpeseSpedizione:E,modalitaConsegna:b,changeStep:i}))}return s.a.createElement(s.a.Fragment,null)},y=(t(32),t(34)),C="https://minicart.it/",O="".concat(C,"img/original/minicart-icona.png");p.a({dsn:"https://f9d712165e144efe8c715e705c0b7e78@o48768.ingest.sentry.io/5203709"});var _=function(e,a){a||(a=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},S=_("pv")?_("pv"):"4";function z(){Object(l.useEffect)(function(){function e(){return(e=Object(c.a)(r.a.mark(function e(){var a,t,n,i,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch(C+"api/ordini/settings/"+S+"/");case 3:return a=e.sent,e.next=6,a.json();case 6:return t=e.sent,o(t),""!=t.logo&&t.logo.indexOf("https")>-1?O=t.logo:""!=t.logo&&(O="".concat(C,"img/original/").concat(t.logo)),e.next=11,window.fetch(C+"api/ordini/menu/"+S+"/");case 11:return n=e.sent,e.next=14,n.json();case 14:i=e.sent,c=i.map(function(e){return e.items.map(function(e){return e})}),l=[].concat.apply([],c),d(l),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}},e,null,[[0,20]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var e=Object(l.useState)({}),a=Object(i.a)(e,2),t=a[0],o=a[1],m=Object(l.useState)([]),u=Object(i.a)(m,2),p=u[0],d=u[1],f=Object(l.useState)(""),v=Object(i.a)(f,2),E=v[0],b=v[1],h=Object(l.useState)(0),_=Object(i.a)(h,2),z=_[0],F=_[1],T=Object(l.useState)({nome:"",indirizzo:"",email:"",telefono:"",note:"",note_pagamento:""}),j=Object(i.a)(T,2),w=j[0],k=j[1],x=Object(l.useState)(0),I=Object(i.a)(x,2),D=I[0],P=I[1],q=Object(l.useState)(0),R=Object(i.a)(q,2),V=R[0],U=R[1],B=Object(l.useState)("Ritira in negozio"),A=Object(i.a)(B,2),J=A[0],M=A[1];navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;var W=function(e,a,t){navigator.vibrate&&window.navigator.vibrate([50]);var i=p.map(function(a){return a.ID===e?Object(n.a)({},a,{q:a.q+1}):a});d(i)},$=function(e){navigator.vibrate&&window.navigator.vibrate([100]);var a=p.map(function(a){return a.ID===e?Object(n.a)({},a,{q:a.q-1}):a});d(a)},Z=function(e,a){var t=p.map(function(t){return t.ID===e?Object(n.a)({},t,{noteRiga:a}):t});d(t)},G=function(e,a){var t=p.map(function(a){return a.ID===e?Object(n.a)({},a,{descriptionVisible:!a.descriptionVisible}):a});d(t),p.forEach(function(t,n){t.ID===e&&""!=t.descrizione&&(K(a),console.log("ha descrizione"))})},H=function(){var e=Object(n.a)({},t,{infoVisible:!t.infoVisible});console.log(e),o(e)},K=function(e){return window.scrollTo(0,e.current.offsetTop)},L=function(e){console.log(z,e,t.data_consegna_attivo);var a=e?z+1:z-1;2!==z||0!=t.data_consegna_attivo||e||(a=0),F(a)},Q=function(){var e=Object(c.a)(r.a.mark(function e(){var a,t,n,i,o=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:"",t=o.length>1&&void 0!==o[1]?o[1]:{},(new FormData).append("data",JSON.stringify(t)),e.next=6,window.fetch(a,{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 6:return n=e.sent,e.next=9,n.json();case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(r.a.mark(function e(){var a,t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(C+"api/ordini/new/"+S+"/",{menu:p,userdata:w,paymentType:E,modalitaConsegna:J});case 2:return a=e.sent,e.next=5,a;case 5:!0===(t=e.sent).success?(P(1),U(t.order_n)):P(-1);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Y="";return""!=t.info&&(Y=t.infoVisible?s.a.createElement("div",{className:"info infoVisible",onClick:function(){return H()}},s.a.createElement("div",null,s.a.createElement("strong",null,"INFO")," ",s.a.createElement("div",null,y(t.info)))):s.a.createElement("div",{className:"info ",onClick:function(){return H()}},s.a.createElement("strong",null,"INFO")," ",t.info)),s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"appContainer"},y(Y),s.a.createElement("h1",null,s.a.createElement("img",{className:"logo",alt:t.title,src:O})),s.a.createElement("h2",null,y(t.motto)),s.a.createElement("div",{className:"productContainer step-"+z},p.map(function(e,a){return s.a.createElement(g,{key:e.ID,product:e,f:{addToCart:W,removeToCart:$,toggleDescription:G},baseUrl:C,addMenuNote:Z,nl2br:y})})),s.a.createElement(N,{success:D,setSuccess:P,step:z,changeStep:L,settings:t,orderNumber:V,paymentType:E,userdata:w,setUserdata:k,inviaOrdine:X,handleSubmit:function(e){e.preventDefault(),L(!0)},goToPaypal:function(){F(4),b("paypal")},goToBonifico:function(){F(4),b("bonifico")},goTocash:function(){F(4),b("cash")},nl2br:y,getSpeseSpedizione:function(e){return parseFloat(e)>parseFloat(t.soglia_sped_gratis)&&parseFloat(t.soglia_sped_gratis)>0?0:parseFloat(t.spese_spedizione)},calculatePrice:function(){return p.reduce(function(e,a){return parseFloat(parseFloat(e)+parseFloat(a.prezzo)*a.q).toFixed(2)},0)},modalitaConsegna:J,setModalitaConsegna:M})))}var F=document.getElementById("root");u.a.render(s.a.createElement(z,null),F)}},[[19,2,1]]]);
//# sourceMappingURL=main.b3a1d316.chunk.js.map